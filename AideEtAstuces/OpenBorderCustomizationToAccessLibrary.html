<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Démonstration - Accéder à la bibliothèque d'images - MyCustomDesk</title>
    <link rel="stylesheet" href="HelpAndTips.css">
    <link rel="stylesheet" href="demo-elements.css">
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: var(--background-white);
            font-family: 'Segoe UI Variable', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .demo-container {
            background: var(--background-white);
            border: 2px solid var(--border-color);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px var(--shadow-light);
            text-align: center;
        }

        .demo-canvas-container {
            background: #2D2D2D;
            border: 2px solid #555555;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            display: inline-block;
        }

        .demo-title {
            color: var(--text-color);
            font-size: 1.5em;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .demo-description {
            color: var(--text-light);
            font-size: 1.1em;
            margin-bottom: 30px;
            line-height: 1.6;
        }


        /* Menu contextuel adaptatif (override de demo-elements.css) */
        .context-menu {
            width: auto;
            min-width: 100px;
            height: auto;
        }

        .menu-item {
            padding: 3px 8px;
            margin: 1px 0;
            font-size: 8px;
            height: 16px;
            white-space: nowrap;
            min-width: fit-content;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .menu-icon {
            flex-shrink: 0;
            color: #F0F0F0;
            width: 12px;
            height: 12px;
        }


        .menu-separator {
            margin: 1px 4px;
        }

        /* Poignée de redimensionnement (ajustement pour cette démo) */
        .resize-handle {
            width: 12px;
            height: 12px;
            left: 243px;
            top: 133px;
            z-index: 5;
        }
























        .back-button, .next-button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .back-button:hover, .next-button:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
        }

        .button-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <h1 class="demo-title">Démonstration - Accéder à la bibliothèque d'images</h1>
        <p class="demo-description">
            Cette démonstration montre comment accéder à la bibliothèque d'images à partir du menu contextuel. Cliquez sur "Personnaliser la Bulle" ouvre la fenêtre de personnalisation de Bulle. Voir l'étape suivante.
        </p>
        
        <div class="demo-canvas-container">
            <div class="demo-canvas">
                <!-- Bordure dynamique -->
                <div class="dynamic-border"></div>

                <!-- Étiquette centrée automatiquement -->
                <div class="label-border">
                    <div class="label-text">Ouvrir le Menu Contextuel</div>
                </div>

                <!-- Curseur de souris -->
                <div class="mouse-cursor"></div>

                <!-- Poignée de redimensionnement -->
                <div class="resize-handle"></div>

                <!-- Cercle d'animation de clic -->
                <div class="click-animation"></div>

                <!-- Souris avec boutons (état normal) -->
                <div class="mouse-zero-click"></div>

                <!-- Souris avec bouton droit coloré (pour les clics) -->
                <div class="mouse-right-click"></div>

                <!-- Souris avec bouton gauche coloré (pour les clics) -->
                <div class="mouse-left-click"></div>

                <!-- Menu contextuel simulé -->
                <div class="context-menu">
                    <div class="menu-item">
                        <svg class="menu-icon" viewBox="0 -960 960 960" width="12" height="12">
                            <path d="M480-80q-82 0-155-31.5t-127.5-86Q143-252 111.5-325T80-480q0-83 32.5-156t88-127Q256-817 330-848.5T488-880q80 0 151 27.5t124.5 76q53.5 48.5 85 115T880-518q0 115-70 176.5T640-280h-74q-9 0-12.5 5t-3.5 11q0 12 15 34.5t15 51.5q0 50-27.5 74T480-80Zm0-400Zm-220 40q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm120-160q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm200 0q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm120 160q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17ZM480-160q9 0 14.5-5t5.5-13q0-14-15-33t-15-57q0-42 29-67t71-25h70q66 0 113-38.5T800-518q0-121-92.5-201.5T488-800q-136 0-232 93t-96 227q0 133 93.5 226.5T480-160Z" fill="currentColor"/>
                        </svg>
                        Personnaliser la bulle
                    </div>
                    <div class="menu-separator"></div>
                    <div class="menu-item">
                        <svg class="menu-icon" viewBox="0 -960 960 960" width="12" height="12">
                            <path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h357l-80 80H200v560h560v-278l80-80v358q0 33-23.5 56.5T760-120H200Zm280-360ZM360-360v-170l367-367q12-12 27-18t30-6q16 0 30.5 6t26.5 18l56 57q11 12 17 26.5t6 29.5q0 15-5.5 29.5T897-728L530-360H360Zm481-424-56-56 56 56ZM440-440h56l232-232-28-28-29-28-231 231v57Zm260-260-29-28 29 28 28 28-28-28Z" fill="currentColor"/>
                        </svg>
                        Éditer
                    </div>
                    <div class="menu-separator"></div>
                    <div class="menu-item">
                        <svg class="menu-icon" viewBox="0 -960 960 960" width="12" height="12">
                            <path d="M520-400h80v-120h120v-80H600v-120h-80v120H400v80h120v120ZM320-240q-33 0-56.5-23.5T240-320v-480q0-33 23.5-56.5T320-880h480q33 0 56.5 23.5T880-800v480q0 33-23.5 56.5T800-240H320Zm0-80h480v-480H320v480ZM160-80q-33 0-56.5-23.5T80-160v-560h80v560h560v80H160Zm160-720v480-480Z" fill="currentColor"/>
                        </svg>
                        Dupliquer
                    </div>
                    <div class="menu-separator"></div>
                    <div class="menu-item">
                        <svg class="menu-icon" viewBox="0 -960 960 960" width="12" height="12">
                            <path d="m376-300 104-104 104 104 56-56-104-104 104-104-56-56-104 104-104-104-56 56 104 104-104 104 56 56Zm-96 180q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520Zm-400 0v520-520Z" fill="currentColor"/>
                        </svg>
                        Supprimer
                    </div>
                </div>

            </div>
        </div>

        <div class="button-container">
            <button class="back-button" onclick="window.close()">Fermer</button>
            <button class="next-button" onclick="openNextStep()">Étape suivante</button>
        </div>
    </div>

    <script>
        // Variables pour l'animation
        let animationPhase = 0;
        let animationTimer;

        // Éléments DOM
        const mouseCursor = document.querySelector('.mouse-cursor');
        const mouseZeroClick = document.querySelector('.mouse-zero-click');
        const mouseRightClick = document.querySelector('.mouse-right-click');
        const mouseLeftClick = document.querySelector('.mouse-left-click');
        const clickAnimation = document.querySelector('.click-animation');
        const contextMenu = document.querySelector('.context-menu');
        const resizeHandle = document.querySelector('.resize-handle');
        const menuItems = document.querySelectorAll('.menu-item');

        function startAnimation() {
            animationTimer = setInterval(() => {
                animationPhase++;

                // Phase 1: Curseur se déplace vers la poignée
                if (animationPhase <= 35) {
                    const progress = animationPhase / 35;
                    const startX = 143, startY = 92;
                    const endX = 243, endY = 133;
                    mouseCursor.style.left = (startX + (endX - startX) * progress) + 'px';
                    mouseCursor.style.top = (startY + (endY - startY) * progress) + 'px';
                }
                // Phase 2: Animation de clic droit, expansion de la poignée et ouverture immédiate du menu
                else if (animationPhase <= 58) {
                    const clickPhase = animationPhase - 35;
                    
                    // Changement de souris pour le clic droit
                    if (clickPhase >= 2) {
                        mouseZeroClick.style.visibility = 'hidden';
                        mouseRightClick.style.visibility = 'visible';
                    }
                    
                    // Retour à la souris normale après le clic
                    if (clickPhase >= 4) {
                        mouseZeroClick.style.visibility = 'visible';
                        mouseRightClick.style.visibility = 'hidden';
                    }

                    // Animation d'expansion et rétraction de la poignée
                    if (clickPhase >= 3) {
                        const expandPhase = clickPhase - 3;
                        if (expandPhase <= 3) {
                            const scale = 1 + (expandPhase * 0.3);
                            resizeHandle.style.transform = `scale(${scale})`;
                            resizeHandle.style.background = '#ffffff';
                            resizeHandle.style.border = '2px solid #ffffff';
                        } else if (expandPhase <= 6) {
                            const shrinkPhase = expandPhase - 3;
                            const scale = 1.9 - (shrinkPhase * 0.3);
                            resizeHandle.style.transform = `scale(${scale})`;
                            resizeHandle.style.background = '#00ffff';
                            resizeHandle.style.border = '1px solid #000';
                        } else {
                            resizeHandle.style.transform = 'scale(1)';
                            resizeHandle.style.background = '#ffffff';
                            resizeHandle.style.border = '1px solid #000';
                        }
                    }
                    
                    // Ouverture immédiate du menu après le clic
                    if (clickPhase >= 4) {
                        const menuProgress = Math.min(1, (clickPhase - 4) / 4);
                        contextMenu.style.visibility = 'visible';
                        contextMenu.style.opacity = menuProgress;
                        contextMenu.style.transform = `scale(${0.8 + menuProgress * 0.2})`;
                    }
                }
                // Phase 3: Menu visible
                else if (animationPhase <= 64) {
                    contextMenu.style.opacity = '1';
                    contextMenu.style.transform = 'scale(1)';
                }
                // Phase 4: Curseur se déplace vers "Personnaliser"
                else if (animationPhase <= 81) {
                    const progress = (animationPhase - 64) / 17;
                    const startX = 243, startY = 133;
                    const endX = 240, endY = 50; // Position de l'option Personnaliser
                    mouseCursor.style.left = (startX + (endX - startX) * progress) + 'px';
                    mouseCursor.style.top = (startY + (endY - startY) * progress) + 'px';
                }
                // Phase 5: Clic sur "Personnaliser"
                else if (animationPhase <= 94) {
                    const clickPhase = animationPhase - 81;
                    
                    // Animation de clic (plus lente et visible)
                    if (clickPhase <= 3) {
                        clickAnimation.style.visibility = 'visible';
                        clickAnimation.style.opacity = '0.7';
                        clickAnimation.style.width = (8 + clickPhase * 4) + 'px';
                        clickAnimation.style.height = (8 + clickPhase * 4) + 'px';
                        clickAnimation.style.left = (236 - clickPhase * 2) + 'px';
                        clickAnimation.style.top = (46 - clickPhase * 2) + 'px';
                    } else if (clickPhase <= 6) {
                        const shrinkPhase = clickPhase - 3;
                        clickAnimation.style.width = (20 - shrinkPhase * 3) + 'px';
                        clickAnimation.style.height = (20 - shrinkPhase * 3) + 'px';
                        clickAnimation.style.left = (230 + shrinkPhase * 2) + 'px';
                        clickAnimation.style.top = (40 + shrinkPhase * 2) + 'px';
                    } else {
                        clickAnimation.style.opacity = '0';
                    }

                    // Changement de souris au clic gauche (plus visible)
                    if (clickPhase >= 2) {
                        mouseZeroClick.style.visibility = 'hidden';
                        mouseLeftClick.style.visibility = 'visible';
                    }
                    
                    // Retour à la souris normale après le clic (plus tard)
                    if (clickPhase >= 6) {
                        mouseZeroClick.style.visibility = 'visible';
                        mouseLeftClick.style.visibility = 'hidden';
                    }

                    // Effet hover sur l'option Personnaliser (plus visible)
                    if (clickPhase >= 1) {
                        menuItems[0].style.background = '#0078d4';
                        menuItems[0].style.color = '#ffffff';
                    }
                }
                // Phase 6: Menu disparaît (animation s'arrête ici)
                else if (animationPhase <= 101) {
                    const progress = (animationPhase - 94) / 7;
                    contextMenu.style.opacity = 1 - progress;
                    contextMenu.style.transform = `scale(${1 - progress * 0.2})`;
                }
                // Reset immédiat après disparition du menu
                else {
                    animationPhase = 0;
                    mouseCursor.style.left = '143px';
                    mouseCursor.style.top = '92px';
                    contextMenu.style.visibility = 'hidden';
                    contextMenu.style.opacity = '0';
                    contextMenu.style.transform = 'scale(0.8)';
                    clickAnimation.style.visibility = 'hidden';
                    clickAnimation.style.opacity = '0';
                    resizeHandle.style.transform = 'scale(1)';
                    resizeHandle.style.background = '#ffffff';
                    resizeHandle.style.border = '1px solid #000';
                    mouseZeroClick.style.visibility = 'visible';
                    mouseLeftClick.style.visibility = 'hidden';
                    menuItems[0].style.background = 'transparent';
                    menuItems[0].style.color = '';
                }
            }, 50);
        }


        // Fonction pour ouvrir l'étape suivante
        function openNextStep() {
            // Ouvrir la démonstration de personnalisation de bulle
            window.open('demo-AccessImageLibrary.html', '_blank');
        }

        // Démarrer l'animation au chargement de la page
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(startAnimation, 1000);
        });
    </script>
</body>
</html>
