<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Démonstration - Afficher la Bulle Horloge - MyCustomDesk</title>
    <link rel="stylesheet" href="HelpAndTips.css">
    <link rel="stylesheet" href="demo-elements.css">
    <style>
        /* Styles spécifiques à cette démonstration */
        body {
            margin: 0;
            padding: 20px;
            background: var(--background-white);
            font-family: 'Segoe UI Variable', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .demo-container {
            background: var(--background-white);
            border: 2px solid var(--border-color);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px var(--shadow-light);
            text-align: center;
        }

        .demo-canvas-container {
            background: #2D2D2D;
            border: 2px solid #555555;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            display: inline-block;
        }

        .demo-title {
            color: var(--text-color);
            font-size: 1.5em;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .demo-description {
            color: var(--text-light);
            font-size: 1.1em;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        /* Menu contextuel adaptatif (override de demo-elements.css) */
        .context-menu {
            width: auto;
            min-width: 100px;
            height: auto;
        }

        .menu-item {
            padding: 3px 8px;
            margin: 1px 0;
            font-size: 8px;
            height: 16px;
            white-space: nowrap;
            min-width: fit-content;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .menu-icon {
            flex-shrink: 0;
            color: #F0F0F0;
            width: 12px;
            height: 12px;
        }

        .menu-separator {
            margin: 1px 4px;
        }

        .mouse-cursor {
            z-index: 1500 !important;
        }

        /* Poignée de redimensionnement (adaptations pour cette démo) */
        .resize-handle {
            /* Override de demo-elements.css pour cette démo */
            width: 12px;
            height: 12px;
            left: 243px !important;
            top: 133px !important;
            z-index: 5;
        }

        /* Horloge flottante */
        .floating-clock {
            position: absolute;
            background: rgba(45, 45, 48, 0.95);
            border: 2px solid white;
            border-radius: 8px;
            padding: 8px 12px;
            left: 150px;
            top: 155px;
            z-index: 1001;
            visibility: hidden;
            opacity: 0;
            transform: translateX(-50%);
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .floating-clock.visible {
            visibility: visible;
            opacity: 1;
            transform: translateX(-50%);
        }

        .clock-time {
            color: white;
            font-size: 14px;
            font-weight: bold;
            font-family: 'Segoe UI', monospace;
            text-align: center;
            margin-bottom: 2px;
        }

        .clock-date {
            color: #cccccc;
            font-size: 10px;
            font-family: 'Segoe UI', sans-serif;
            text-align: center;
        }

        /* Styles pour le sous-menu */
        .submenu-arrow {
            margin-left: auto;
            font-size: 8px;
            color: #F0F0F0;
            transition: transform 0.2s ease;
        }

        .submenu {
            position: absolute;
            left: 100%;
            top: 0;
            background: #2F2F2F;
            border: 1px solid #555555;
            border-radius: 4px;
            min-width: 85px;
            visibility: hidden;
            opacity: 0;
            transform: scale(0.8);
            transition: all 0.2s ease;
            z-index: 1003;
        }

        .submenu.visible {
            visibility: visible;
            opacity: 1;
            transform: scale(1);
        }

        .submenu-item {
            padding: 3px 8px;
            margin: 1px 0;
            font-size: 8px;
            height: 16px;
            white-space: nowrap;
            min-width: fit-content;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .submenu-item:hover {
            background: #404040;
        }

        .back-button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <h1 class="demo-title">Démonstration - Afficher la Bulle Horloge</h1>
        <p class="demo-description">
            • Cette démonstration montre comment afficher et masquer l'horloge via le menu contextuel.<br>
            • Effectuez un clic droit sur la poignée pour ouvrir le menu et accéder aux options d'horloge.
        </p>
        
        <div class="demo-canvas-container">
            <div class="demo-canvas">
                <!-- Bordure dynamique -->
                <div class="dynamic-border"></div>

                <!-- Étiquette centrée automatiquement -->
                <div class="label-border">
                    <div class="label-text">Afficher la Bulle Horloge</div>
                </div>

                <!-- Curseur de souris -->
                <div class="mouse-cursor"></div>

                <!-- Poignée de redimensionnement -->
                <div class="resize-handle"></div>

                <!-- Horloge flottante -->
                <div class="floating-clock" id="floating-clock">
                    <div class="clock-time">14:32:15</div>
                    <div class="clock-date">Lun 16 Déc 2024</div>
                </div>

                <!-- Cercle d'animation de clic -->
                <div class="click-animation"></div>

                <!-- Souris avec boutons (état normal) -->
                <div class="mouse-zero-click"></div>

                <!-- Souris avec bouton droit coloré (pour les clics) -->
                <div class="mouse-right-click"></div>

                <!-- Souris avec bouton gauche coloré (pour les clics) -->
                <div class="mouse-left-click"></div>

                <!-- Menu contextuel simulé -->
                <div class="context-menu">
                    <div class="menu-item">
                        <svg class="menu-icon" viewBox="0 -960 960 960" width="12" height="12">
                            <path d="M480-80q-82 0-155-31.5t-127.5-86Q143-252 111.5-325T80-480q0-83 32.5-156t88-127Q256-817 330-848.5T488-880q80 0 151 27.5t124.5 76q53.5 48.5 85 115T880-518q0 115-70 176.5T640-280h-74q-9 0-12.5 5t-3.5 11q0 12 15 34.5t15 51.5q0 50-27.5 74T480-80Zm0-400Zm-220 40q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm120-160q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm200 0q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm120 160q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17ZM480-160q9 0 14.5-5t5.5-13q0-14-15-33t-15-57q0-42 29-67t71-25h70q66 0 113-38.5T800-518q0-121-92.5-201.5T488-800q-136 0-232 93t-96 227q0 133 93.5 226.5T480-160Z" fill="currentColor"/>
                        </svg>
                        Personnaliser le Widget
                    </div>
                    <div class="menu-separator"></div>
                    <div class="menu-item" id="clock-section">
                        <svg class="menu-icon" viewBox="0 -960 960 960" width="12" height="12">
                            <path d="M582,-298 L440,-440 v-200 h80 v167 l118,118 -56,57 Z M440,-720 v-80 h80 v80 h-80 Z M720,-440 v-80 h80 v80 h-80 Z M440,-160 v-80 h80 v80 h-80 Z M160,-440 v-80 h80 v80 h-80 Z M480,-80 q-83,0 -156,-31.5 T197,-197 q-54,-54 -85.5,-127 T80,-480 q0,-83 31.5,-156 T197,-763 q54,-54 127,-85.5 T480,-880 q83,0 156,31.5 T763,-763 q54,54 85.5,127 T880,-480 q0,83 -31.5,156 T763,-197 q-54,54 -127,85.5 T480,-80 Z M480,-160 q134,0 227,-93 t93,-227 q0,-134 -93,-227 t-227,-93 q-134,0 -227,93 t-93,227 q0,134 93,227 t227,93 Z" fill="currentColor"/>
                        </svg>
                        Afficher l'horloge
                        <span class="submenu-arrow">▶</span>
                    </div>
                    <div class="submenu" id="clock-submenu">
                        <div class="menu-item submenu-item" id="show-clock-item" data-text-hide="Masquer l'horloge" data-text-show="Afficher l'horloge">
                            <svg class="menu-icon" viewBox="0 -960 960 960" width="12" height="12">
                                <path d="M582,-298 L440,-440 v-200 h80 v167 l118,118 -56,57 Z M440,-720 v-80 h80 v80 h-80 Z M720,-440 v-80 h80 v80 h-80 Z M440,-160 v-80 h80 v80 h-80 Z M160,-440 v-80 h80 v80 h-80 Z M480,-80 q-83,0 -156,-31.5 T197,-197 q-54,-54 -85.5,-127 T80,-480 q0,-83 31.5,-156 T197,-763 q54,-54 127,-85.5 T480,-880 q83,0 156,31.5 T763,-763 q54,54 85.5,127 T880,-480 q0,83 -31.5,156 T763,-197 q-54,54 -127,85.5 T480,-80 Z M480,-160 q134,0 227,-93 t93,-227 q0,-134 -93,-227 t-227,-93 q-134,0 -227,93 t-93,227 q0,134 93,227 t227,93 Z" fill="currentColor"/>
                            </svg>
                            <span class="clock-option-text">Afficher l'horloge</span>
                        </div>
                        <div class="menu-item submenu-item">
                            <svg class="menu-icon" viewBox="0 -960 960 960" width="12" height="12">
                                <path d="M120,-120 L120,-360 L200,-360 L200,-256 L324,-380 L380,-324 L256,-200 L360,-200 L360,-120 L120,-120 Z M600,-120 L600,-200 L704,-200 L580,-324 L636,-380 L760,-256 L760,-360 L840,-360 L840,-120 L600,-120 Z M324,-580 L200,-704 L200,-600 L120,-600 L120,-840 L360,-840 L360,-760 L256,-760 L380,-636 L324,-580 Z M636,-580 L580,-636 L704,-760 L600,-760 L600,-840 L840,-840 L840,-600 L760,-600 L760,-704 L636,-580 Z" fill="currentColor"/>
                            </svg>
                            Taille de l'horloge
                        </div>
                        <div class="menu-item submenu-item">
                            <svg class="menu-icon" viewBox="0 -960 960 960" width="12" height="12">
                                <path d="M480,-80 Q398,-80,325,-111.5 T197,-197 Q143,-251,111.5,-324 T80,-480 Q80,-563,112.5,-636 T200,-763 Q256,-817,330,-848.5 T488,-880 Q568,-880,639,-852.5 T763,-776 Q816,-727,847.5,-660 T880,-518 Q880,-403,810,-341.5 T640,-280 H566 Q557,-280,553.5,-275 T550,-264 Q550,-252,565,-229.5 T580,-178 Q580,-128,552.5,-104 T480,-80 ZM260,-440 Q286,-440,303,-457 T320,-500 Q320,-526,303,-543 T260,-560 Q234,-560,217,-543 T200,-500 Q200,-474,217,-457 T260,-440 ZM380,-600 Q406,-600,423,-617 T440,-660 Q440,-686,423,-703 T380,-720 Q354,-720,337,-703 T320,-660 Q320,-634,337,-617 T380,-600 ZM580,-600 Q606,-600,623,-617 T640,-660 Q640,-686,623,-703 T580,-720 Q554,-720,537,-703 T520,-660 Q520,-634,537,-617 T580,-600 ZM700,-440 Q726,-440,743,-457 T760,-500 Q760,-526,743,-543 T700,-560 Q674,-560,657,-543 T640,-500 Q640,-474,657,-457 T700,-440 ZM480,-160 Q489,-160,494.5,-165 T500,-178 Q500,-192,485,-211 T470,-268 Q470,-310,499,-335 T570,-360 H640 Q706,-360,753,-398.5 T800,-518 Q800,-639,707.5,-719.5 T488,-800 Q352,-800,256,-707 T160,-480 Q160,-347,253.5,-253.5 T480,-160 Z" fill="currentColor"/>
                            </svg>
                            Personnaliser l'horloge
                        </div>
                    </div>
                    <div class="menu-separator"></div>
                    <div class="menu-item">
                        <svg class="menu-icon" viewBox="0 -960 960 960" width="12" height="12">
                            <path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h357l-80 80H200v560h560v-278l80-80v358q0 33-23.5 56.5T760-120H200Zm280-360ZM360-360v-170l367-367q12-12 27-18t30-6q16 0 30.5 6t26.5 18l56 57q11 12 17 26.5t6 29.5q0 15-5.5 29.5T897-728L530-360H360Zm481-424-56-56 56 56ZM440-440h56l232-232-28-28-29-28-231 231v57Zm260-260-29-28 29 28 28 28-28-28Z" fill="currentColor"/>
                        </svg>
                        Éditer
                    </div>
                    <div class="menu-separator"></div>
                    <div class="menu-item">
                        <svg class="menu-icon" viewBox="0 -960 960 960" width="12" height="12">
                            <path d="M320-240q-33 0-56.5-23.5T240-320v-480q0-33 23.5-56.5T320-880h480q33 0 56.5 23.5T880-800v480q0 33-23.5 56.5T800-240H320Zm0-80h480v-480H320v480ZM160-80q-33 0-56.5-23.5T80-160v-560h80v560h560v80H160Zm160-720v480-480Z" fill="currentColor"/>
                        </svg>
                        Dupliquer
                    </div>
                    <div class="menu-separator"></div>
                    <div class="menu-item">
                        <svg class="menu-icon" viewBox="0 -960 960 960" width="12" height="12">
                            <path d="m376-300 104-104 104 104 56-56-104-104 104-104-56-56-104 104-104-104-56 56 104 104-104 104 56 56Zm-96 180q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520Zm-400 0v520-520Z" fill="currentColor"/>
                        </svg>
                        Supprimer
                    </div>
                </div>
            </div>
        </div>

        <!-- Contrôle de vitesse standardisé -->
        <div class="speed-control">
            <label for="speedSlider">Vitesse de l'animation :</label>
            <input type="range" id="speedSlider" min="0.25" max="3" step="0.25" value="1" class="speed-slider">
            <span id="speedValue">1x</span>
        </div>

        <button class="back-button" onclick="window.close()">Fermer</button>
    </div>

    <script>
        // Variables pour l'animation avec standardisation
        let animationPhase = 0;
        let animationTimer;
        let animationSpeed = 1;
        let baseInterval = 80; // Intervalle de base pour cette démo
        const CURSOR_SPEED_PX_PER_FRAME = 9; // Vitesse standardisée
        let isClockVisible = false; // État de l'horloge : false = masquée, true = visible

        // Éléments DOM
        const mouseCursor = document.querySelector('.mouse-cursor');
        const mouseZeroClick = document.querySelector('.mouse-zero-click');
        const mouseRightClick = document.querySelector('.mouse-right-click');
        const mouseLeftClick = document.querySelector('.mouse-left-click');
        const clickAnimation = document.querySelector('.click-animation');
        const contextMenu = document.querySelector('.context-menu');
        const labelBorder = document.querySelector('.label-border');
        const clockSection = document.querySelector('#clock-section');
        const clockSubmenu = document.querySelector('#clock-submenu');
        const showClockItem = document.querySelector('#show-clock-item');
        const floatingClock = document.querySelector('#floating-clock');
        const canvas = document.querySelector('.demo-canvas');
        let labelCenterX = 300;
        let labelCenterY = 127;
        let bubbleCenterX = 300;
        let bubbleCenterY = 200;

        // Fonction pour mettre à jour le texte et l'icône de la sous-option
        function updateClockOptionState() {
            const iconElement = showClockItem.querySelector('.menu-icon');
            const textElement = showClockItem.querySelector('.clock-option-text');
            
            if (isClockVisible) {
                // État : horloge visible -> option "Masquer l'horloge"
                if (textElement) {
                    textElement.textContent = showClockItem.getAttribute('data-text-hide');
                }
                
                // Mettre à jour l'icône (horloge barrée)
                if (iconElement) {
                    iconElement.innerHTML = '<path d="m644-428-58-58q9-47-27-88t-93-32l-58-58q17-8 34.5-12t37.5-4q75 0 127.5 52.5T660-500q0 20-4 37.5T644-428Zm128 126-58-56q38-29 67.5-63.5T832-500q-50-101-143.5-160.5T480-720q-29 0-57 4t-55 12l-62-62q41-17 84-25.5t90-8.5q151 0 269 83.5T920-500q-23 59-60.5 109.5T772-302Zm20 246L624-222q-35 11-70.5 16.5T480-200q-151 0-269-83.5T40-500q21-53 53-98.5t73-81.5L56-792l56-56 736 736-56 56ZM222-624q-29 26-53 57t-41 67q50 101 143.5 160.5T480-280q20 0 39-2.5t39-5.5l-36-38q-11 3-21 4.5t-21 1.5q-75 0-127.5-52.5T300-500q0-11 1.5-21t4.5-21l-84-82Zm319 93Zm-151 75Z" fill="currentColor"/>';
                }
            } else {
                // État : horloge masquée -> option "Afficher l'horloge"
                if (textElement) {
                    textElement.textContent = showClockItem.getAttribute('data-text-show');
                }
                
                // Mettre à jour l'icône (horloge normale)
                if (iconElement) {
                    iconElement.innerHTML = '<path d="M582,-298 L440,-440 v-200 h80 v167 l118,118 -56,57 Z M440,-720 v-80 h80 v80 h-80 Z M720,-440 v-80 h80 v80 h-80 Z M440,-160 v-80 h80 v80 h-80 Z M160,-440 v-80 h80 v80 h-80 Z M480,-80 q-83,0 -156,-31.5 T197,-197 q-54,-54 -85.5,-127 T80,-480 q0,-83 31.5,-156 T197,-763 q54,-54 127,-85.5 T480,-880 q83,0 156,31.5 T763,-763 q54,54 85.5,127 T880,-480 q0,83 -31.5,156 T763,-197 q-54,54 -127,85.5 T480,-80 Z M480,-160 q134,0 227,-93 t93,-227 q0,-134 -93,-227 t-227,-93 q-134,0 -227,93 t-93,227 q0,134 93,227 t227,93 Z" fill="currentColor"/>';
                }
            }
        }

        function startAnimation() {
            // Position initiale du curseur selon demo-elements.css (143px, 92px)
            mouseCursor.style.left = '143px';
            mouseCursor.style.top = '92px';
            mouseCursor.style.visibility = 'visible';
            
            function runAnimationFrame() {
                animationPhase++;

                // Calculer les frames de mouvement une seule fois
                const moveToHandleFrames = Math.ceil(Math.sqrt((244-143)**2 + (133-92)**2) / CURSOR_SPEED_PX_PER_FRAME);
                const moveToClockSectionFrames = Math.ceil(Math.sqrt((222-244)**2 + (65-133)**2) / CURSOR_SPEED_PX_PER_FRAME);
                const moveToSubmenuFrames = Math.ceil(Math.sqrt((85)**2 + (-17)**2) / CURSOR_SPEED_PX_PER_FRAME);

                // Phase 1: Curseur se déplace vers la poignée (vitesse standardisée)
                if (animationPhase <= moveToHandleFrames) {
                    const progress = animationPhase / moveToHandleFrames;
                    const startX = 143, startY = 92; // Position par défaut selon demo-elements.css
                    const endX = 244, endY = 133; // Position de la poignée
                    mouseCursor.style.left = (startX + (endX - startX) * progress) + 'px';
                    mouseCursor.style.top = (startY + (endY - startY) * progress) + 'px';
                }
                // Phase 2: Clic droit sur la poignée
                else if (animationPhase <= moveToHandleFrames + 25) {
                    const clickPhase = animationPhase - moveToHandleFrames;
                    
                    // Changement de souris selon demo-elements.css
                    if (clickPhase >= 2) {
                        mouseZeroClick.style.visibility = 'hidden';
                        mouseRightClick.style.visibility = 'visible';
                    }
                    if (clickPhase >= 4) {
                        mouseZeroClick.style.visibility = 'visible';
                        mouseRightClick.style.visibility = 'hidden';
                    }

                    // Animation d'expansion et rétraction de la poignée (synchronisée avec le clic)
                    if (clickPhase >= 3) {
                        const expandPhase = clickPhase - 3;
                        if (expandPhase <= 3) {
                            // Expansion
                            const scale = 1 + (expandPhase * 0.3);
                            document.querySelector('.resize-handle').style.transform = `scale(${scale})`;
                            document.querySelector('.resize-handle').style.background = '#ffffff';
                            document.querySelector('.resize-handle').style.border = '2px solid #ffffff';
                        } else if (expandPhase <= 6) {
                            // Rétraction
                            const shrinkPhase = expandPhase - 3;
                            const scale = 1.9 - (shrinkPhase * 0.3);
                            document.querySelector('.resize-handle').style.transform = `scale(${scale})`;
                            document.querySelector('.resize-handle').style.background = '#00ffff';
                            document.querySelector('.resize-handle').style.border = '1px solid #000';
                        } else {
                            // Retour à l'état initial
                            document.querySelector('.resize-handle').style.transform = 'scale(1)';
                            document.querySelector('.resize-handle').style.background = '#ffffff';
                            document.querySelector('.resize-handle').style.border = '1px solid #000';
                        }
                    }

                    // Ouverture du menu contextuel
                    if (clickPhase >= 8) {
                        const menuProgress = Math.min(1, (clickPhase - 8) / 6);
                        contextMenu.style.visibility = 'visible';
                        contextMenu.style.opacity = menuProgress;
                        contextMenu.style.transform = `scale(${0.8 + menuProgress * 0.2})`;
                    }
                }
                // Phase 3: Menu visible, déplacement vers "Afficher l'horloge"
                else if (animationPhase <= moveToHandleFrames + 25 + moveToClockSectionFrames) {
                    contextMenu.style.opacity = '1';
                    contextMenu.style.transform = 'scale(1)';
                    
                    // Déplacement vers "Afficher l'horloge" (vitesse standardisée)
                    const movePhase = animationPhase - (moveToHandleFrames + 25);
                    if (movePhase >= 2) {
                        const progress = Math.min(1, (movePhase - 2) / moveToClockSectionFrames);
                        const startX = 244, startY = 133;
                        const endX = 180 + 42, endY = 40 + 25; // Position relative de "Afficher l'horloge"
                        mouseCursor.style.left = (startX + (endX - startX) * progress) + 'px';
                        mouseCursor.style.top = (startY + (endY - startY) * progress) + 'px';
                    }
                }
                // Phase 4: Survol et clic sur "Afficher l'horloge"
                else if (animationPhase <= 75) {
                    const hoverPhase = animationPhase - 55;
                    
                    // Effet de survol sur "Afficher l'horloge"
                    if (hoverPhase >= 2) {
                        clockSection.style.background = '#404040';
                        clockSection.style.color = '#F0F0F0';
                        
                        // Animation de clic sur "Afficher l'horloge"
                        if (hoverPhase >= 3 && hoverPhase <= 13) {
                            const clickPhase = hoverPhase - 3;
                            
                            // Effet de clic sur "Afficher l'horloge" selon demo-Label-Position-Dialog.html
                            if (clickPhase >= 1 && clickPhase <= 2.5) {
                                const activateProgress = (clickPhase - 1) / 1.5;
                                const scale = 1 - (activateProgress * 0.05);
                                clockSection.style.background = 'linear-gradient(135deg, #0078d4, #106ebe)';
                                clockSection.style.color = '#ffffff';
                                clockSection.style.transform = `scale(${scale})`;
                                clockSection.style.boxShadow = `0 0 ${4 + activateProgress * 4}px rgba(0, 120, 212, ${0.3 + activateProgress * 0.3})`;
                            } else if (clickPhase > 2.5 && clickPhase <= 4.5) {
                                const releaseProgress = (clickPhase - 2.5) / 2;
                                const scale = 0.95 + (releaseProgress * 0.05);
                                clockSection.style.transform = `scale(${scale})`;
                                if (releaseProgress > 0.8) {
                                    clockSection.style.background = '#404040';
                                    clockSection.style.color = '#F0F0F0';
                                    clockSection.style.boxShadow = 'none';
                                }
                            } else {
                                clockSection.style.background = '#404040';
                                clockSection.style.color = '#F0F0F0';
                                clockSection.style.transform = 'scale(1)';
                                clockSection.style.boxShadow = 'none';
                            }
                            
                            // Changement de souris pour clic gauche selon demo-elements.css
                            if (clickPhase >= 2) {
                                mouseZeroClick.style.visibility = 'hidden';
                                mouseLeftClick.style.visibility = 'visible';
                            }
                            if (clickPhase >= 6) {
                                mouseZeroClick.style.visibility = 'visible';
                                mouseLeftClick.style.visibility = 'hidden';
                            }
                            
                            // Animation circulaire de clic
                            if (clickPhase <= 3) {
                                clickAnimation.style.visibility = 'visible';
                                clickAnimation.style.opacity = '0.6';
                                clickAnimation.style.width = (8 + clickPhase * 4) + 'px';
                                clickAnimation.style.height = (8 + clickPhase * 4) + 'px';
                                clickAnimation.style.left = (180 + 42 - 4 - clickPhase * 2) + 'px';
                                clickAnimation.style.top = (40 + 25 - 4 - clickPhase * 2) + 'px';
                            } else if (clickPhase <= 6) {
                                const shrinkPhase = clickPhase - 3;
                                clickAnimation.style.width = (20 - shrinkPhase * 3) + 'px';
                                clickAnimation.style.height = (20 - shrinkPhase * 3) + 'px';
                                clickAnimation.style.left = (180 + 42 - 10 + shrinkPhase * 2) + 'px';
                                clickAnimation.style.top = (40 + 25 - 10 + shrinkPhase * 2) + 'px';
                            } else {
                                clickAnimation.style.opacity = '0';
                            }
                        }
                        
                        // Ouverture du sous-menu
                        if (hoverPhase >= 6) {
                            const submenuProgress = Math.min(1, (hoverPhase - 6) / 6);
                            clockSubmenu.style.visibility = 'visible';
                            clockSubmenu.style.opacity = submenuProgress;
                            clockSubmenu.style.transform = `translateX(${-5 + submenuProgress * 5}px)`;
                        }
                    }
                }
                // Phase 5: Déplacement vers "Afficher l'horloge"
                else if (animationPhase <= 90) {
                    const movePhase = animationPhase - 75;
                    if (movePhase <= 15) {
                        const progress = movePhase / 15;
                        const startX = 180 + 42, startY = 40 + 25;
                        const endX = 265 + 42, endY = 40 + 8; // Position relative de "Afficher l'horloge" (1ère option du sous-menu)
                        mouseCursor.style.left = (startX + (endX - startX) * progress) + 'px';
                        mouseCursor.style.top = (startY + (endY - startY) * progress) + 'px';
                    }
                    
                    // Effet de survol sur "Afficher l'horloge"
                    if (movePhase >= 10) {
                        showClockItem.style.background = '#404040';
                    }
                }
                // Phase 6: Clic sur "Afficher l'horloge"
                else if (animationPhase <= 105) {
                    const clickPhase = animationPhase - 90;
                    
                    // Animation de clic
                    if (clickPhase <= 3) {
                        clickAnimation.style.visibility = 'visible';
                        clickAnimation.style.opacity = '0.6';
                        clickAnimation.style.width = (8 + clickPhase * 3) + 'px';
                        clickAnimation.style.height = (8 + clickPhase * 3) + 'px';
                        clickAnimation.style.left = (265 + 42 - 4 - clickPhase * 2) + 'px';
                        clickAnimation.style.top = (40 + 8 - 4 - clickPhase * 2) + 'px';
                    } else if (clickPhase <= 6) {
                        const shrinkPhase = clickPhase - 3;
                        clickAnimation.style.width = (17 - shrinkPhase * 3) + 'px';
                        clickAnimation.style.height = (17 - shrinkPhase * 3) + 'px';
                        clickAnimation.style.left = (265 + 42 - 10 + shrinkPhase * 2) + 'px';
                        clickAnimation.style.top = (40 + 8 - 10 + shrinkPhase * 2) + 'px';
                    } else {
                        clickAnimation.style.opacity = '0';
                    }
                    
                    // Effet de clic sur "Afficher l'horloge" selon demo-Label-Position-Dialog.html
                    if (clickPhase >= 1 && clickPhase <= 2.5) {
                        const activateProgress = (clickPhase - 1) / 1.5;
                        const scale = 1 - (activateProgress * 0.05);
                        showClockItem.style.background = 'linear-gradient(135deg, #0078d4, #106ebe)';
                        showClockItem.style.color = '#ffffff';
                        showClockItem.style.transform = `scale(${scale})`;
                        showClockItem.style.boxShadow = `0 0 ${4 + activateProgress * 4}px rgba(0, 120, 212, ${0.3 + activateProgress * 0.3})`;
                    } else if (clickPhase > 2.5 && clickPhase <= 4.5) {
                        const releaseProgress = (clickPhase - 2.5) / 2;
                        const scale = 0.95 + (releaseProgress * 0.05);
                        showClockItem.style.transform = `scale(${scale})`;
                        if (releaseProgress > 0.8) {
                            showClockItem.style.background = '#404040';
                            showClockItem.style.color = '#F0F0F0';
                            showClockItem.style.boxShadow = 'none';
                        }
                    } else {
                        showClockItem.style.background = '#404040';
                        showClockItem.style.color = '#F0F0F0';
                        showClockItem.style.transform = 'scale(1)';
                        showClockItem.style.boxShadow = 'none';
                    }

                    // Changement de souris pour clic gauche selon demo-elements.css
                    if (clickPhase >= 2) {
                        mouseZeroClick.style.visibility = 'hidden';
                        mouseLeftClick.style.visibility = 'visible';
                    }
                    if (clickPhase >= 6) {
                        mouseZeroClick.style.visibility = 'visible';
                        mouseLeftClick.style.visibility = 'hidden';
                    }
                    
                    // Fermeture du menu après le clic
                    if (clickPhase >= 8) {
                        const closeProgress = Math.min(1, (clickPhase - 8) / 6);
                        contextMenu.style.opacity = 1 - closeProgress;
                        contextMenu.style.transform = `scale(${1 - closeProgress * 0.2})`;
                        clockSubmenu.style.opacity = 1 - closeProgress;
                        clockSubmenu.style.transform = `translateX(${-closeProgress * 5}px)`;
                    }
                }
                // Phase 7: Animation d'apparition de l'horloge
                else if (animationPhase <= 125) {
                    const showPhase = animationPhase - 105;
                    
                    // Masquer le menu complètement
                    contextMenu.style.visibility = 'hidden';
                    clockSubmenu.style.visibility = 'hidden';
                    
                    // Animation d'apparition de l'horloge
                    if (showPhase >= 3) {
                        const fadeProgress = Math.min(1, (showPhase - 3) / 12);
                        
                        // Apparition simple sans effet de scale
                        const fadeAmount = fadeProgress;
                        floatingClock.style.opacity = fadeAmount;
                        floatingClock.style.transform = 'translateX(-50%)';
                        
                        if (fadeProgress >= 0.1) {
                            floatingClock.style.visibility = 'visible';
                        }
                        
                        if (fadeProgress >= 0.9) {
                            // Changer l'état : horloge maintenant visible
                            isClockVisible = true;
                        }
                    }
                }
                // Phase 8: Déplacement vers la poignée pour réouvrir le menu
                else if (animationPhase <= 140) {
                    const movePhase = animationPhase - 125;
                    
                    // Horloge reste visible
                    floatingClock.style.visibility = 'visible';
                    mouseCursor.style.visibility = 'visible';
                    
                    // Déplacement vers la poignée
                    if (movePhase <= 15) {
                        const progress = movePhase / 15;
                        const startX = 265 + 42, startY = 40 + 8; // Position de "Afficher l'horloge"
                        const endX = 244, endY = 133; // Position de la poignée selon demo-elements.css
                        mouseCursor.style.left = (startX + (endX - startX) * progress) + 'px';
                        mouseCursor.style.top = (startY + (endY - startY) * progress) + 'px';
                    }
                }
                // Phase 9: Clic sur la poignée pour réouvrir le menu
                else if (animationPhase <= 165) {
                    const clickPhase = animationPhase - 140;
                    
                    // Changement de souris pour clic droit
                    if (clickPhase >= 2) {
                        mouseZeroClick.style.visibility = 'hidden';
                        mouseRightClick.style.visibility = 'visible';
                    }
                    if (clickPhase >= 4) {
                        mouseZeroClick.style.visibility = 'visible';
                        mouseRightClick.style.visibility = 'hidden';
                    }

                    // Animation d'expansion et rétraction de la poignée (synchronisée avec le clic)
                    if (clickPhase >= 3) {
                        const expandPhase = clickPhase - 3;
                        if (expandPhase <= 3) {
                            // Expansion
                            const scale = 1 + (expandPhase * 0.3);
                            document.querySelector('.resize-handle').style.transform = `scale(${scale})`;
                            document.querySelector('.resize-handle').style.background = '#ffffff';
                            document.querySelector('.resize-handle').style.border = '2px solid #ffffff';
                        } else if (expandPhase <= 6) {
                            // Rétraction
                            const shrinkPhase = expandPhase - 3;
                            const scale = 1.9 - (shrinkPhase * 0.3);
                            document.querySelector('.resize-handle').style.transform = `scale(${scale})`;
                            document.querySelector('.resize-handle').style.background = '#00ffff';
                            document.querySelector('.resize-handle').style.border = '1px solid #000';
                        } else {
                            // Retour à l'état initial
                            document.querySelector('.resize-handle').style.transform = 'scale(1)';
                            document.querySelector('.resize-handle').style.background = '#ffffff';
                            document.querySelector('.resize-handle').style.border = '1px solid #000';
                        }
                    }

                    
                    // Réouverture du menu
                    if (clickPhase >= 8) {
                        const menuProgress = Math.min(1, (clickPhase - 8) / 6);
                        contextMenu.style.visibility = 'visible';
                        contextMenu.style.opacity = menuProgress;
                        contextMenu.style.transform = `scale(${0.8 + menuProgress * 0.2})`;
                    }
                }
                // Phase 10: Menu visible, déplacement vers "Afficher l'horloge"
                else if (animationPhase <= 180) {
                    const movePhase = animationPhase - 165;
                    
                    contextMenu.style.opacity = '1';
                    contextMenu.style.transform = 'scale(1)';
                    
                    // Déplacement vers "Afficher l'horloge"
                    if (movePhase <= 15) {
                        const progress = movePhase / 15;
                        const startX = 244, startY = 133; // Position de la poignée
                        const endX = 180 + 42, endY = 40 + 25; // Position de "Afficher l'horloge"
                        mouseCursor.style.left = (startX + (endX - startX) * progress) + 'px';
                        mouseCursor.style.top = (startY + (endY - startY) * progress) + 'px';
                    }
                }
                // Phase 11: Clic sur "Afficher l'horloge" pour ouvrir le sous-menu
                else if (animationPhase <= 195) {
                    const clickPhase = animationPhase - 180;
                    
                    // Effet de survol sur "Afficher l'horloge"
                    if (clickPhase >= 2) {
                        clockSection.style.background = '#404040';
                        clockSection.style.color = '#F0F0F0';
                        
                        // Animation de clic
                        if (clickPhase >= 3 && clickPhase <= 13) {
                            const clickPhaseInner = clickPhase - 3;
                            
                            // Effet de clic bleu
                            if (clickPhaseInner >= 1 && clickPhaseInner <= 2.5) {
                                const activateProgress = (clickPhaseInner - 1) / 1.5;
                                const scale = 1 - (activateProgress * 0.05);
                                clockSection.style.background = 'linear-gradient(135deg, #0078d4, #106ebe)';
                                clockSection.style.color = '#ffffff';
                                clockSection.style.transform = `scale(${scale})`;
                                clockSection.style.boxShadow = `0 0 ${4 + activateProgress * 4}px rgba(0, 120, 212, ${0.3 + activateProgress * 0.3})`;
                            } else if (clickPhaseInner > 2.5 && clickPhaseInner <= 4.5) {
                                const releaseProgress = (clickPhaseInner - 2.5) / 2;
                                const scale = 0.95 + (releaseProgress * 0.05);
                                clockSection.style.transform = `scale(${scale})`;
                                if (releaseProgress > 0.8) {
                                    clockSection.style.background = '#404040';
                                    clockSection.style.color = '#F0F0F0';
                                    clockSection.style.boxShadow = 'none';
                                }
                            } else {
                                clockSection.style.background = '#404040';
                                clockSection.style.color = '#F0F0F0';
                                clockSection.style.transform = 'scale(1)';
                                clockSection.style.boxShadow = 'none';
                            }
                            
                            // Changement de souris
                            if (clickPhaseInner >= 2) {
                                mouseZeroClick.style.visibility = 'hidden';
                                mouseLeftClick.style.visibility = 'visible';
                            }
                            if (clickPhaseInner >= 6) {
                                mouseZeroClick.style.visibility = 'visible';
                                mouseLeftClick.style.visibility = 'hidden';
                            }
                            
                            // Animation circulaire
                            if (clickPhaseInner <= 3) {
                                clickAnimation.style.visibility = 'visible';
                                clickAnimation.style.opacity = '0.6';
                                clickAnimation.style.width = (8 + clickPhaseInner * 4) + 'px';
                                clickAnimation.style.height = (8 + clickPhaseInner * 4) + 'px';
                                clickAnimation.style.left = (180 + 42 - 4 - clickPhaseInner * 2) + 'px';
                                clickAnimation.style.top = (40 + 25 - 4 - clickPhaseInner * 2) + 'px';
                            } else if (clickPhaseInner <= 6) {
                                const shrinkPhase = clickPhaseInner - 3;
                                clickAnimation.style.width = (20 - shrinkPhase * 3) + 'px';
                                clickAnimation.style.height = (20 - shrinkPhase * 3) + 'px';
                                clickAnimation.style.left = (180 + 42 - 10 + shrinkPhase * 2) + 'px';
                                clickAnimation.style.top = (40 + 25 - 10 + shrinkPhase * 2) + 'px';
                            } else {
                                clickAnimation.style.opacity = '0';
                            }
                        }
                        
                        // Ouverture du sous-menu
                        if (clickPhase >= 6) {
                            const submenuProgress = Math.min(1, (clickPhase - 6) / 6);
                            clockSubmenu.style.visibility = 'visible';
                            clockSubmenu.style.opacity = submenuProgress;
                            clockSubmenu.style.transform = `translateX(${-5 + submenuProgress * 5}px)`;
                            
                            // Mettre à jour l'état de l'option quand le sous-menu s'ouvre
                            if (submenuProgress >= 0.5) {
                                updateClockOptionState();
                            }
                        }
                    }
                }
                // Phase 12: Déplacement vers "Masquer l'horloge"
                else if (animationPhase <= 210) {
                    const movePhase = animationPhase - 195;
                    
                    if (movePhase <= 15) {
                        const progress = movePhase / 15;
                        const startX = 180 + 42, startY = 40 + 25;
                        const endX = 265 + 42, endY = 40 + 8; // Position de "Masquer l'horloge"
                        mouseCursor.style.left = (startX + (endX - startX) * progress) + 'px';
                        mouseCursor.style.top = (startY + (endY - startY) * progress) + 'px';
                    }
                }
                // Phase 13: Clic sur "Masquer l'horloge"
                else if (animationPhase <= 225) {
                    const clickPhase = animationPhase - 210;
                    
                    // Effet de survol sur "Masquer l'horloge"
                    if (clickPhase >= 2) {
                        showClockItem.style.background = '#404040';
                        showClockItem.style.color = '#F0F0F0';
                        
                        // Animation de clic
                        if (clickPhase >= 3 && clickPhase <= 13) {
                            const clickPhaseInner = clickPhase - 3;
                            
                            // Effet de clic bleu
                            if (clickPhaseInner >= 1 && clickPhaseInner <= 2.5) {
                                const activateProgress = (clickPhaseInner - 1) / 1.5;
                                const scale = 1 - (activateProgress * 0.05);
                                showClockItem.style.background = 'linear-gradient(135deg, #0078d4, #106ebe)';
                                showClockItem.style.color = '#ffffff';
                                showClockItem.style.transform = `scale(${scale})`;
                                showClockItem.style.boxShadow = `0 0 ${4 + activateProgress * 4}px rgba(0, 120, 212, ${0.3 + activateProgress * 0.3})`;
                            } else if (clickPhaseInner > 2.5 && clickPhaseInner <= 4.5) {
                                const releaseProgress = (clickPhaseInner - 2.5) / 2;
                                const scale = 0.95 + (releaseProgress * 0.05);
                                showClockItem.style.transform = `scale(${scale})`;
                                if (releaseProgress > 0.8) {
                                    showClockItem.style.background = '#404040';
                                    showClockItem.style.color = '#F0F0F0';
                                    showClockItem.style.boxShadow = 'none';
                                }
                            } else {
                                showClockItem.style.background = '#404040';
                                showClockItem.style.color = '#F0F0F0';
                                showClockItem.style.transform = 'scale(1)';
                                showClockItem.style.boxShadow = 'none';
                            }
                            
                            // Changement de souris
                            if (clickPhaseInner >= 2) {
                                mouseZeroClick.style.visibility = 'hidden';
                                mouseLeftClick.style.visibility = 'visible';
                            }
                            if (clickPhaseInner >= 6) {
                                mouseZeroClick.style.visibility = 'visible';
                                mouseLeftClick.style.visibility = 'hidden';
                            }
                            
                            // Animation circulaire
                            if (clickPhaseInner <= 3) {
                                clickAnimation.style.visibility = 'visible';
                                clickAnimation.style.opacity = '0.6';
                                clickAnimation.style.width = (8 + clickPhaseInner * 3) + 'px';
                                clickAnimation.style.height = (8 + clickPhaseInner * 3) + 'px';
                                clickAnimation.style.left = (265 + 42 - 4 - clickPhaseInner * 2) + 'px';
                                clickAnimation.style.top = (40 + 8 - 4 - clickPhaseInner * 2) + 'px';
                            } else if (clickPhaseInner <= 6) {
                                const shrinkPhase = clickPhaseInner - 3;
                                clickAnimation.style.width = (17 - shrinkPhase * 3) + 'px';
                                clickAnimation.style.height = (17 - shrinkPhase * 3) + 'px';
                                clickAnimation.style.left = (265 + 42 - 10 + shrinkPhase * 2) + 'px';
                                clickAnimation.style.top = (40 + 8 - 10 + shrinkPhase * 2) + 'px';
                            } else {
                                clickAnimation.style.opacity = '0';
                            }
                        }
                        
                        // Fermeture du menu après le clic
                        if (clickPhase >= 6) {
                            const closeProgress = Math.min(1, (clickPhase - 6) / 6);
                            contextMenu.style.opacity = 1 - closeProgress;
                            clockSubmenu.style.opacity = 1 - closeProgress;
                            if (closeProgress >= 1) {
                                contextMenu.style.visibility = 'hidden';
                                clockSubmenu.style.visibility = 'hidden';
                            }
                        }
                    }
                }
                // Phase 14: Animation de disparition de l'horloge
                else if (animationPhase <= 240) {
                    const hidePhase = animationPhase - 225;
                    
                    // Animation de disparition de l'horloge
                    if (hidePhase >= 3) {
                        const fadeProgress = Math.min(1, (hidePhase - 3) / 12);
                        
                        // Disparition simple sans effet de scale
                        const fadeAmount = 1 - fadeProgress;
                        floatingClock.style.opacity = fadeAmount;
                        floatingClock.style.transform = 'translateX(-50%)';
                        
                        if (fadeProgress >= 0.9) {
                            floatingClock.style.visibility = 'hidden';
                            // Changer l'état : horloge maintenant masquée
                            isClockVisible = false;
                        }
                    }
                }
                // Phase 15: Pause finale avant reset
                else if (animationPhase <= 255) {
                    // Horloge masquée, pause avant redémarrage
                    floatingClock.style.visibility = 'hidden';
                    floatingClock.style.opacity = '0';
                    floatingClock.style.transform = 'translateX(-50%)';
                    isClockVisible = false;
                    mouseCursor.style.visibility = 'hidden';
                }
                // Phase 16: Reset pour la boucle
                else {
                    // Reset de tous les éléments
                    animationPhase = 0;
                    
                    // Reset de la position du curseur (position par défaut)
                    mouseCursor.style.left = '143px';
                    mouseCursor.style.top = '92px';
                    mouseCursor.style.visibility = 'visible';
                    
                    // Reset de l'horloge
                    floatingClock.style.visibility = 'hidden';
                    floatingClock.style.opacity = '0';
                    floatingClock.style.transform = 'translateX(-50%)';
                    floatingClock.style.border = '2px solid white';
                    floatingClock.style.boxShadow = 'none';
                    
                    // Reset du menu
                    contextMenu.style.visibility = 'hidden';
                    contextMenu.style.opacity = '0';
                    contextMenu.style.transform = 'scale(0.8)';
                    
                    // Reset du sous-menu
                    clockSubmenu.style.visibility = 'hidden';
                    clockSubmenu.style.opacity = '0';
                    clockSubmenu.style.transform = 'translateX(-5px)';
                    
                    // Reset des effets de survol
                    clockSection.style.background = 'transparent';
                    clockSection.style.color = '#F0F0F0';
                    clockSection.style.transform = 'scale(1)';
                    clockSection.style.boxShadow = 'none';
                    showClockItem.style.background = 'transparent';
                    showClockItem.style.color = '#F0F0F0';
                    showClockItem.style.transform = 'scale(1)';
                    showClockItem.style.boxShadow = 'none';
                    
                    // Reset de l'état et de l'option
                    isClockVisible = false;
                    updateClockOptionState();
                    
                    // Reset de l'animation de clic
                    clickAnimation.style.visibility = 'hidden';
                    clickAnimation.style.opacity = '0';
                    
                    // Reset de la souris selon demo-elements.css
                    mouseZeroClick.style.visibility = 'visible';
                    mouseRightClick.style.visibility = 'hidden';
                    mouseLeftClick.style.visibility = 'hidden';
                }
                // Calculer l'intervalle juste avant de programmer la prochaine frame
                const currentInterval = Math.round(baseInterval / animationSpeed);
                animationTimer = setTimeout(runAnimationFrame, currentInterval);
            }
            
            // Démarrer la première frame
            runAnimationFrame();
        }

        function restartAnimationWithNewSpeed() {
            if (animationTimer) {
                clearTimeout(animationTimer);
            }
            // Reset complet de l'état avant de redémarrer
            animationPhase = 0;
            
            // Reset de la position du curseur (position par défaut)
            mouseCursor.style.left = '143px';
            mouseCursor.style.top = '92px';
            mouseCursor.style.visibility = 'visible';
            
            // Reset de l'horloge
            floatingClock.style.visibility = 'hidden';
            floatingClock.style.opacity = '0';
            floatingClock.style.transform = 'translateX(-50%)';
            floatingClock.style.border = '2px solid white';
            floatingClock.style.boxShadow = 'none';
            
            // Reset du menu
            contextMenu.style.visibility = 'hidden';
            contextMenu.style.opacity = '0';
            contextMenu.style.transform = 'scale(0.8)';
            
            // Reset du sous-menu
            clockSubmenu.style.visibility = 'hidden';
            clockSubmenu.style.opacity = '0';
            clockSubmenu.style.transform = 'translateX(-5px)';
            
            // Reset des effets de survol
            clockSection.style.background = 'transparent';
            clockSection.style.color = '#F0F0F0';
            clockSection.style.transform = 'scale(1)';
            clockSection.style.boxShadow = 'none';
            showClockItem.style.background = 'transparent';
            showClockItem.style.color = '#F0F0F0';
            showClockItem.style.transform = 'scale(1)';
            showClockItem.style.boxShadow = 'none';
            
            // Reset de l'état et de l'option
            isClockVisible = false;
            updateClockOptionState();
            
            // Reset de l'animation de clic
            clickAnimation.style.visibility = 'hidden';
            clickAnimation.style.opacity = '0';
            
            // Reset de la souris selon demo-elements.css
            mouseZeroClick.style.visibility = 'visible';
            mouseRightClick.style.visibility = 'hidden';
            mouseLeftClick.style.visibility = 'hidden';
            
            setTimeout(startAnimation, 100);
        }

        // Fonction pour changer la vitesse sans restart (réactivité maximale)
        function changeAnimationSpeed(newSpeed) {
            animationSpeed = newSpeed;
            // Pas besoin de restart, la prochaine frame utilisera automatiquement la nouvelle vitesse
        }

        // Démarrer l'animation au chargement de la page
        document.addEventListener('DOMContentLoaded', function() {
            const speedSlider = document.getElementById('speedSlider');
            const speedValue = document.getElementById('speedValue');
            
            if (speedSlider && speedValue) {
                speedSlider.addEventListener('input', function() {
                    const newSpeed = parseFloat(this.value);
                    speedValue.textContent = newSpeed + 'x';
                    changeAnimationSpeed(newSpeed);
                });
                
                speedValue.textContent = animationSpeed + 'x';
            } else {
                console.warn('Éléments du slider non trouvés');
            }

            if (canvas && labelBorder) {
            const canvasRect = canvas.getBoundingClientRect();
            const labelRect = labelBorder.getBoundingClientRect();
                const bubbleRect = document.querySelector('.dynamic-border').getBoundingClientRect();
                
                // Position de l'étiquette
            labelCenterX = Math.round(labelRect.left - canvasRect.left + labelRect.width / 2);
            labelCenterY = Math.round(labelRect.top - canvasRect.top + labelRect.height / 2);
                
                // Position du centre de la bulle
                bubbleCenterX = Math.round(bubbleRect.left - canvasRect.left + bubbleRect.width / 2);
                bubbleCenterY = Math.round(bubbleRect.top - canvasRect.top + bubbleRect.height / 2);
                
                console.log('Label center:', labelCenterX, labelCenterY);
                console.log('Bubble center:', bubbleCenterX, bubbleCenterY);
            }
            
            // Initialiser l'état de la sous-option
            updateClockOptionState();
            
            setTimeout(startAnimation, 1000);
        });
    </script>
</body>
</html>