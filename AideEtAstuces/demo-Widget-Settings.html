<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Démonstration - Bouton P (Paramètres) - MyCustomDesk</title>
    <link rel="stylesheet" href="HelpAndTips.css">
    <link rel="stylesheet" href="demo-elements.css">
    <style>
        body {
            background: var(--background-white);
            font-family: 'Segoe UI Variable', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .demo-container {
            background: var(--background-white);
            border: 2px solid var(--border-color);
            border-radius: 15px;
            box-shadow: 0 10px 30px var(--shadow-light);
            text-align: center;
            padding: 5px 25px 5px 25px;
        }

        .demo-canvas-container {
            background: #2D2D2D;
            border: 2px solid #555555;
            border-radius: 15px;
            display: inline-block;
            height: 800px;
            width: 900px;
            padding: 5px 5px 5px 5px;
        }

        .demo-canvas.large {
            width: 700px;
            height: 700px;
        }


        /* back-button styles removed to use global styles in demo-elements.css */

        /* Fenêtre de paramètres complète */
        .settings-window {
            position: absolute;
            width: 800px;
            height: 730px;
            background: #ffffff;
            border: 2px solid #c0c0c0;
            border-radius: 30px;
            padding: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
            left: 50%;
            top: 55%;
            transform: translate(-50%, -50%);
            transition: opacity 0.5s ease;
        }

        .settings-window.visible {
            opacity: 1;
            visibility: visible;
        }

        .settings-window.fading {
            opacity: 0;
            visibility: visible;
        }

        .settings-content {
            margin: 6px;
            height: calc(100% - 12px);
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .settings-header {
            font-size: 16px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 8px;
            color: #000000;
        }

        .settings-main {
            flex: 1;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 8px;
        }

        .settings-column {
            margin: 5px;
        }

        .section-border {
            border: 1px solid #c0c0c0;
            border-radius: 6px;
            padding: 8px;
            margin-bottom: 8px;
            background: #ffffff;
        }

        .section-title {
            font-weight: 600;
            margin-bottom: 6px;
            font-size: 13px;
            color: #000000 !important;
        }

        .subsection-border {
            border: 1px solid #c0c0c0;
            border-radius: 5px;
            padding: 6px;
            background: #ffffff;
        }

        .button-stack {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .icon {
            width: 14px;
            height: 12px;
            margin-right: 5px;
        }

        .settings-button {
            background: #f0f0f0;
            border: 1px solid #c0c0c0;
            border-radius: 4px;
            padding: 4px 8px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 5px;
            width: 100%;
            margin-bottom: 5px;
        }

        .settings-button:hover {
            background: #e0e0e0;
            border-color: #a0a0a0;
        }

        .settings-button:active {
            background: #d0d0d0;
        }

        .checkbox-container {
            display: flex;
            align-items: center;
            margin: 3px 0;
        }

        .checkbox {
            width: 16px;
            height: 16px;
            margin-right: 8px;
            cursor: pointer;
        }

        .checkbox-label {
            font-size: 12px;
            color: #000000;
            cursor: pointer;
        }

        .input-group {
            display: flex;
            align-items: center;
            margin: 5px 0;
            gap: 5px;
        }

        .input-label {
            font-size: 12px;
            color: #000000;
            min-width: 80px;
        }

        .text-input {
            width: 50px;
            height: 20px;
            border: 1px solid #c0c0c0;
            border-radius: 4px;
            padding: 2px 4px;
            font-size: 12px;
        }

        .combo-box {
            width: 120px;
            height: 24px;
            border: 1px solid #c0c0c0;
            border-radius: 4px;
            padding: 2px 4px;
            font-size: 12px;
            background: #ffffff;
        }

        .combo-box-small {
            width: 50px;
        }

        .help-button {
            width: 22px;
            height: 22px;
            border-radius: 11px;
            border: 1px solid #c0c0c0;
            background: #f0f0f0;
            font-size: 13px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .help-button:hover {
            background: #e0e0e0;
        }

        .language-section {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .language-combo {
            width: 120px;
            margin-left: 5px;
        }

        .apply-button {
            width: 120px;
            height: 24px;
            margin-left: 60px;
        }

        .description-text {
            font-size: 10px!important;
            color: #666666;
            margin: 5px 0 0 0 !important;
            line-height: 1.3 !important;
            height: 0px !important;
        }

        .sound-section {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .settings-footer {
            position: absolute;
            bottom: 20px;
            right: 20px;
        }

        .close-button {
            width: 90px;
            height: 25px;
            background: #f0f0f0;
            border: 1px solid #c0c0c0;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
        }

        .close-button:hover {
            background: #e0e0e0;
        }

        /* Icônes SVG */
        .icon {
            width: 22px;
            height: 22px;
            margin-right: 5px;
            fill: currentColor;
            stroke: none;
        }

        .icon-large {
            width: 22px;
            height: 22px;
        }


        /* Bouton P du widget - style spécifique pour éviter le conflit */
        .desktop-widget .widget-button.settings-button {
            background: transparent !important;
            border: none !important;
            color: white !important;
            font-size: 32px !important;
            font-weight: bold !important;
            width: 100% !important;
            height: 50% !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            cursor: pointer !important;
            transition: all 0.2s ease !important;
        }

        .desktop-widget .widget-button.settings-button:hover {
            background: transparent !important;
            color: white !important;
        }

        /* Permettre les changements dynamiques pour l'effet de clic */
        .desktop-widget .widget-button.settings-button[style*="background"] {
            background: transparent !important;
        }
        
        /* Style pour l'effet cyan du bouton P */
        .desktop-widget .widget-button.settings-button.cyan-effect {
            color: cyan !important;
        }

        /* Bouton + du widget - taille de police doublée */
        .desktop-widget .widget-button.add-button {
            font-size: 40px !important;
        }

        /* speed-control local styles removed to use global styles in demo-elements.css */



        .desktop-widget.bottom {
            left: 300px;
            top: 300px;
            width: 100px;
            height: 200px;
        }

        .mouse-cursor.bottom {
            left: 600px;
            top: 250px;
            z-index: 99999;
        }

        .mouse-zero-click.large {
            left: 650px;
            top: 50px;
        }

        .mouse-left-click.large {
            left: 650px;
            top: 50px;
        }

    </style>
</head>
<body>
    <div class="demo-container">
        <div class="demo-header">
        <h1 class="demo-title">Démonstration - Bouton P (Paramètres)</h1>
        <p class="demo-description">
            Cette démonstration montre comment ouvrir la fenêtre des paramètres en cliquant sur le bouton P du widget de bureau.
        </p>
        </div>
        
        <!-- Contrôle de vitesse standardisé (avec barre de progression intégrée) -->
        <div class="speed-control">
            <label for="speedSlider">Vitesse de l'animation :</label>
            <input type="range" id="speedSlider" min="0.25" max="3" step="0.25" value="1" class="speed-slider">
            <span id="speedValue">1x</span>
            <button id="pauseButton" class="pause-button">Pause</button>
            <button class="back-button" onclick="window.close()">Fermer</button>
            <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            <div class="progress-text" id="progressText">Préparation de la démonstration...</div>
        </div>
        
        <div class="demo-canvas-container">
            <div class="demo-canvas large">
                <!-- Widget de bureau -->
                <div class="desktop-widget bottom">
                    <button class="widget-button add-button">+</button>
                    <button class="widget-button settings-button">P</button>
                </div>

                <!-- Fenêtre des paramètres complète -->
                <div class="settings-window">
                    <div class="settings-content">
                        <div class="settings-header">Paramètres</div>
                        
                        <div class="settings-main">
                            <!-- Colonne de gauche -->
                            <div class="settings-column">
                                <!-- Couleur de fond d'écran -->
                                <div class="section-border">
                                    <div class="section-title">Couleur de fond d'écran</div>
                                    <div class="subsection-border">
                                        <button class="settings-button">
                                            <svg class="icon" viewBox="0 0 1000 1000">
                                                <path d="M480,920 Q398,920 325,888.5 T197,803 Q143,749 111.5,676 T80,520 Q80,437 111.5,364 T200,237 Q256,183 330,151.5 T488,120 Q568,120 639,147.5 T764,223.5 Q817.5,272 849,339 T880,482 Q880,597 810,658.5 T640,720 H566 Q557,720 553.5,725 T550,736 Q550,748 565,770.5 T580,821.5 Q580,872 552.5,896 T480,920 ZM260,560 Q286,560 303,543 T320,500 Q320,474 303,457 T260,440 Q234,440 217,457 T200,500 Q200,526 217,543 T260,560 ZM380,400 Q406,400 423,383 T440,340 Q440,314 423,297 T380,280 Q354,280 337,297 T320,340 Q320,366 337,383 T380,400 ZM580,400 Q606,400 623,383 T640,340 Q640,314 623,297 T580,280 Q554,280 537,297 T520,340 Q520,366 537,383 T580,400 ZM700,560 Q726,560 743,543 T760,500 Q760,474 743,457 T700,440 Q674,440 657,457 T640,500 Q640,526 657,543 T700,560 ZM480,840 Q489,840 494.5,835 T500,822 Q500,808 485,788.5 T470,731.5 Q470,690 499,664.5 T570,640 H640 Q706,640 753,601.5 T800,482 Q800,361 707.5,280.5 T488,200 Q352,200 256,293 T160,520 Q160,653 253.5,746.5 T480,840 Z"/>
                                            </svg>
                                            Couleur du fond d'écran
                                        </button>
                                    </div>
                                </div>

                                <!-- Fond d'écran personnalisé -->
                                <div class="section-border">
                                    <div class="section-title">Fond d'écran personnalisé</div>
                                    <div class="subsection-border">
                                        <div class="checkbox-container">
                                            <input type="checkbox" class="checkbox" id="custom-wallpaper">
                                            <label for="custom-wallpaper" class="checkbox-label">Activer le fond personnalisé</label>
                                        </div>
                                        <div class="checkbox-container">
                                            <input type="checkbox" class="checkbox" id="tile-mode">
                                            <label for="tile-mode" class="checkbox-label">Activer le mode tuile pour le fond d'écran</label>
                                        </div>
                                        <button class="settings-button">
                                            <svg class="icon" viewBox="0 0 1000 1000">
                                                <path d="M440,560 ZM120,880 Q87,880 63.5,856.5 T40,800 V320 Q40,287 63.5,263.5 T120,240 H246 L320,160 H560 V240 H355 L282,320 H120 V800 H760 V440 H840 V800 Q840,833 816.5,856.5 T760,880 H120 ZM760,320 V240 H680 V160 H760 V80 H840 V160 H920 V240 H840 V320 H760 ZM440,740 Q515,740 567.5,687.5 T620,560 Q620,485 567.5,432.5 T440,380 Q365,380 312.5,432.5 T260,560 Q260,635 312.5,687.5 T440,740 ZM440,660 Q398,660 369,631 T340,559 Q441,518 369,489 T440,460 Q482,460 511,489 T540,560 Q540,602 511,631 T440,660 Z"/>
                                            </svg>
                                            Importer un fichier
                                        </button>
                                        <div class="checkbox-container">
                                            <input type="checkbox" class="checkbox" id="random-image">
                                            <label for="random-image" class="checkbox-label">Activer le changement aléatoire d'image</label>
                                        </div>
                                        <div class="input-group">
                                            <span class="input-label">Intervalle (secondes) :</span>
                                            <input type="text" class="text-input" value="30">
                                            <button class="settings-button" style="width: auto; margin: 0;">
                                                <svg class="icon" viewBox="0 0 1000 1000">
                                                    <path d="M424,704 L706,422 L650,366 L424,592 L310,478 L254,534 L424,704 ZM480,920 Q397,920 324,888.5 T197,803 Q143,749 111.5,676 T80,520 Q80,437 111.5,364 T197,237 Q251,183 324,151.5 T480,120 Q563,120 636,151.5 T763,237 Q817,291 848.5,364 T880,520 Q880,603 848.5,676 T763,803 Q709,857 636,888.5 T480,920 ZM480,840 Q614,840 707,747 T800,520 Q800,386 707,293 T480,200 Q346,200 253,293 T160,520 Q160,654 253,747 T480,840 Z"/>
                                                </svg>
                                                Définir
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Thème de l'interface -->
                                <div class="section-border">
                                    <div class="section-title">Thème de l'interface</div>
                                    <div class="subsection-border">
                                        <div class="input-group">
                                            <span class="input-label">Mode de thème :</span>
                                            <select class="combo-box" style="margin-left: 120px;">
                                                <option>Automatique</option>
                                                <option>Sombre</option>
                                                <option>Clair</option>
                                            </select>
                                            <button class="help-button">?</button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Personnaliser le titre des étiquettes -->
                                <div class="section-border">
                                    <div class="section-title">Personnaliser le titre des étiquettes</div>
                                    <div class="subsection-border">
                                        <div class="input-group">
                                            <span class="input-label">Police :</span>
                                            <select class="combo-box">
                                                <option>Segoe UI</option>
                                                <option>Arial</option>
                                                <option>Calibri</option>
                                            </select>
                                        </div>
                                        <div class="input-group">
                                            <span class="input-label">Taille :</span>
                                            <select class="combo-box combo-box-small">
                                                <option>14</option>
                                                <option>16</option>
                                                <option>18</option>
                                                <option>20</option>
                                                <option>22</option>
                                                <option>24</option>
                                            </select>
                                        </div>
                                        <div class="checkbox-container">
                                            <input type="checkbox" class="checkbox" id="bold-title">
                                            <label for="bold-title" class="checkbox-label">Titres en gras</label>
                                        </div>
                                    </div>
                                </div>

                                <!-- Magnétisme -->
                                <div class="section-border">
                                    <div class="section-title">Magnétisme de déplacement et redimensionnement</div>
                                    <div class="subsection-border">
                                        <div class="checkbox-container">
                                            <input type="checkbox" class="checkbox" id="grid-snapping">
                                            <label for="grid-snapping" class="checkbox-label">Activer magnétisme</label>
                                        </div>
                                        <p class="description-text">Aligne automatiquement les éléments sur une grille lors du déplacement ou du redimensionnement.</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Colonne de droite -->
                            <div class="settings-column">
                                <!-- Langue de l'application -->
                                <div class="section-border">
                                    <div class="section-title">Langue de l'application</div>
                                    <div class="subsection-border">
                                        <div class="language-section">
                                            <svg class="icon icon-large" viewBox="0 0 1000 1000" style="fill: #000000;">
                                                <path d="M480,920q-82 0-155-31.5t-127.5-86Q143,748 111.5,675T80,520q0-83 31.5-155.5t86-127Q252,183 325,151.5T480,120q83 0 155.5 31.5t127 86q54.5 54.5 86 127T880,520q0 82-31.5 155t-86 127.5q-54.5 54.5-127 86T480,920Zm0-82q26-36 45-75t31-83H404q12 44 31 83t45 75Zm-104-16q-18-33-31.5-68.5T322,680H204q29 50 72.5 87t99.5 55Zm208 0q56-18 99.5-55t72.5-87H638q-9 38-22.5 73.5T584,822ZM170,600h136q-3-20-4.5-39.5T300,520q0-21 1.5-40.5T306,440H170q-5 20-7.5 39.5T160,520q0 21 2.5 40.5T170,600Zm216 0h188q3-20 4.5-39.5T580,520q0-21-1.5-40.5T574,440H386q-3 20-4.5 39.5T380,520q0 21 1.5 40.5T386,600Zm268 0h136q5-20 7.5-39.5T800,520q0-21-2.5-40.5T790,440H654q3 20 4.5 39.5T660,520q0 21-1.5 40.5T654,600Zm-16-240h118q-29-50-72.5-87T584,218q18 33 31.5 68.5T638,360Zm-234 0h152q-12-44-31-83t-45-75q-26 36-45 75t-31 83Zm-200 0h118q9-38 22.5-73.5T376,218q-56 18-99.5 55T204,360Z"/>
                                            </svg>
                                            <select class="combo-box language-combo">
                                                <option>Français</option>
                                                <option>English</option>
                                                <option>Español</option>
                                                <option>Deutsch</option>
                                                <option>Italiano</option>
                                                <option>Português</option>
                                                <option>Русский</option>
                                                <option>العربية</option>
                                                <option>日本語</option>
                                                <option>한국어</option>
                                                <option>中文</option>
                                            </select>
                                            <button class="settings-button apply-button">Appliquer</button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Démarrer avec Windows -->
                                <div class="section-border">
                                    <div class="section-title">Démarrer avec Windows</div>
                                    <div class="subsection-border">
                                        <div class="checkbox-container">
                                            <input type="checkbox" class="checkbox" id="start-with-windows">
                                            <label for="start-with-windows" class="checkbox-label">Démarrer MyCustomDesk avec Windows</label>
                                        </div>
                                    </div>
                                </div>

                                <!-- Son -->
                                <div class="section-border">
                                    <div class="section-title">Son</div>
                                    <div class="subsection-border">
                                        <div class="sound-section">
                                            <svg class="icon" viewBox="0 0 1000 1000">
                                                <path d="M560,869V787q90,-26,145,-100t55,-168q0,-94,-55,-168T560,251v-82q124,28,202,125.5T840,519q0,127-78,224.5T560,869ZM120,640v-240h160l200,-200v640L280,640H120Zm440,40v-322q47,22,73.5,66t26.5,96q0,51-26.5,94.5T560,680ZM400,394l-86,86H200v80h114l86,86v-252ZM300,520Z"/>
                                            </svg>
                                            <span class="checkbox-label">Activer les sons</span>
                                            <input type="checkbox" class="checkbox" id="sound-enabled" style="margin-left: 10px;">
                                        </div>
                                    </div>
                                </div>

                                <!-- Options supplémentaires -->
                                <div class="section-border">
                                    <div class="section-title">Options supplémentaires</div>
                                    <div class="subsection-border">
                                        <button class="settings-button">
                                            <svg class="icon" viewBox="0 0 1000 1000">
                                                <path d="M828,755 L753,680 H800 V280 H353 L245,172 Q253,148 273.5,134 T320,120 H800 Q833,120 856.5,143.5 T880,200 V680 Q880,706 866,726.5 T828,755 ZM820,972 L608,760 H320 Q287,760 263.5,736.5 T240,680 V392 L28,180 L84,124 L876,916 L820,972 ZM320,680 H528 L320,472 V680 ZM160,920 Q127,920 103.5,896.5 T80,840 V280 H160 V840 H720 V920 H160 Z"/>
                                            </svg>
                                            Supprimer toutes les bulles
                                        </button>
                                        <button class="settings-button">
                                            <svg class="icon" viewBox="0 0 1000 1000">
                                                <path d="M160,920 V840 H800 V920 H160 ZM360,760 V480 H200 L480,120 L760,480 H600 V760 H360 ZM440,680 H520 V400 H596 L480,250 L364,400 H440 V680 Z"/>
                                            </svg>
                                            Exporter les paramètres
                                        </button>
                                        <button class="settings-button">
                                            <svg class="icon" viewBox="0 0 1000 1000">
                                                <path d="M160,920 V840 H800 V920 H160 ZM480,760 L200,400 H360 V120 H600 V400 H760 L480,760 ZM480,630 L596,480 H520 V200 H440 V480 H364 L480,630 Z"/>
                                            </svg>
                                            Importer les paramètres
                                        </button>
                                        <button class="settings-button">
                                            <svg class="icon" viewBox="0 0 1000 1000">
                                                <path d="M480,920 L470,800 H460 Q318,800 219,701 T120,460 Q120,318 219,219 T460,120 Q531,120 592.5,146.5 T700,220 Q746.5,266.5 773,328 T800,460 Q800,535 775.5,604 T708,732 Q665.5,791 607,839 T480,920 Z M560,774 Q631,714 675.5,633.5 T720,460 Q720,351 644.5,275.5 T460,200 Q351,200 275.5,275.5 T200,460 Q200,569 275.5,644.5 T460,720 H560 V774 Z M459,679 Q476,679 488,667 T500,638 Q500,621 488,609 T459,597 Q442,597 430,609 T418,638 Q418,655 430,667 T459,679 Z M430,552 H490 Q490,522 496,510 T540,466 Q558,448 570,427 T582,382 Q582,331 547.5,305.5 T460,280 Q416,280 386,304.5 T344,364 L400,386 Q405,369 419,352.5 T460,336 Q487,336 500.5,351 T514,384 Q514,401 504,414.5 T480,442 Q445,472 437.5,489.5 T430,552 Z"/>
                                            </svg>
                                            Afficher Aide au démarrage
                                        </button>
                                        <button class="settings-button">
                                            <svg class="icon" viewBox="0 0 1000 1000">
                                                <path d="M226,441 L304,474 Q318,446 333,420 T366,368 L310,357 L226,441 ZM368,524 L482,637 Q524,621 572,588 T662,513 Q732,443 771.5,357.5 T806,200 Q734,195 648,234.5 T492,344 Q450,386 417,434 T368,524 ZM546,459 Q523,436 523,402.5 T546,345.5 Q569,322 603,322 T660,345.5 Q683,369 683,402.5 T660,459 Q637,482 603,482 T546,459 ZM565,780 L649,696 L638,640 Q612,658 586,673 T532,701 L565,780 ZM878,127 Q897,248 854.5,362.5 T708,581 L728,680 Q732,700 726,719 T706,752 L538,920 L454,723 L283,552 L86,468 L253,300 Q267,286 286.5,280 T326,278 L425,298 Q529,194 643,151 T878,127 ZM157,679 Q192,644 242.5,643.5 T328,678 Q363,713 362.5,763.5 T327,849 Q302,874 243.5,892 T82,924 Q96,821 114,762.5 T157,679 ZM214,735 Q204,745 194,771.5 T180,825 Q207,821 233.5,811.5 T270,792 Q282,780 283,763 T272,734 Q260,722 243,722.5 T214,735 Z"/>
                                            </svg>
                                            Aide et astuces
                                        </button>
                                        <button class="settings-button">
                                            <svg class="icon" viewBox="0 0 1000 1000">
                                                <path d="M440,720 H520 V480 H440 V720 ZM480,400 Q497,400 508.5,388.5 T520,360 Q520,343 508.5,331.5 T480,320 Q463,320 451.5,331.5 T440,360 Q440,377 451.5,388.5 T480,400 ZM480,920 Q397,920 324,888.5 T197,803 Q143,749 111.5,676 T80,520 Q80,437 111.5,364 T197,237 Q251,183 324,151.5 T480,120 Q563,120 636,151.5 T763,237 Q817,291 848.5,364 T880,520 Q880,603 848.5,676 T763,803 Q709,857 636,888.5 T480,920 Z"/>
                                            </svg>
                                            A Propos
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="settings-footer">
                            <button class="close-button">Fermer</button>
                        </div>
                    </div>
                </div>
                
                <!-- Curseur de souris -->
                <div class="mouse-cursor bottom"></div>

                <!-- Souris avec boutons (état normal) -->
                <div class="mouse-zero-click large"></div>

                <!-- Souris avec bouton gauche coloré (pour les clics) -->
                <div class="mouse-left-click large"></div>

            </div>
        </div>

        
    </div>

    <script>
        // Variables pour l'animation
        let animationPhase = 0;
        let animationTimer;
        let isPaused = false;
        
        // Standardisation de la vitesse du curseur (selon demo-elements.css)
        const CURSOR_SPEED_PX_PER_FRAME = 9;
        
        // Calculer le nombre total de frames de l'animation
        const movementFrames = Math.ceil(Math.sqrt((600-350)**2 + (250-400)**2) / CURSOR_SPEED_PX_PER_FRAME);
        const totalAnimationFrames = movementFrames + 81; // Total jusqu'au redémarrage
        
        // Variables standardisées pour le contrôle de vitesse
        let animationSpeed = 1;
        let baseInterval = 50; // Intervalle de base pour cette démo

        // Éléments DOM
        const mouseCursor = document.querySelector('.mouse-cursor');
        const mouseZeroClick = document.querySelector('.mouse-zero-click');
        const mouseLeftClick = document.querySelector('.mouse-left-click');
        const desktopWidget = document.querySelector('.desktop-widget');
        const settingsButton = document.querySelector('.settings-button');
        const settingsWindow = document.querySelector('.settings-window');
        

        function startAnimation() {
            function runAnimationFrame() {
                // Vérifier si l'animation est en pause
                if (isPaused) {
                    animationTimer = setTimeout(runAnimationFrame, 100); // Vérifier toutes les 100ms
                    return;
                }
                
                animationPhase++;

                // Phase 1: Curseur se déplace vers le bouton P
                if (animationPhase <= movementFrames) {
                    const progress = animationPhase / movementFrames;
                    const startX = 600, startY = 250;
                    const endX = 340, endY = 415; // Position du bouton P (centre du bouton P dans le widget repositionné)
                    mouseCursor.style.left = (startX + (endX - startX) * progress) + 'px';
                    mouseCursor.style.top = (startY + (endY - startY) * progress) + 'px';
                }
                // Phase 2: Animation de clic sur le bouton P
                else if (animationPhase <= movementFrames + 8) {
                    const clickPhase = animationPhase - movementFrames;

                    // Changement de souris pour le clic gauche (logique standardisée)
                    if (clickPhase >= 2) {
                        mouseZeroClick.style.visibility = 'hidden';
                        mouseLeftClick.style.visibility = 'visible';
                    }
                    
                    // Retour immédiat à la souris normale après le clic
                    if (clickPhase >= 4) {
                        mouseZeroClick.style.visibility = 'visible';
                        mouseLeftClick.style.visibility = 'hidden';
                    }

                    // Bouton P s'allume en cyan brièvement (synchronisé avec le clic gauche)
                    if (clickPhase >= 2 && clickPhase <= 4) {
                        settingsButton.classList.add('cyan-effect');
                    } else {
                        settingsButton.classList.remove('cyan-effect');
                    }
                }
                // Phase 3: Ouverture de la fenêtre des paramètres
                else if (animationPhase <= movementFrames + 15) {
                    const openPhase = animationPhase - (movementFrames + 8);
                    
                    // La fenêtre des paramètres apparaît immédiatement
                    if (openPhase >= 2) {
                        settingsWindow.classList.add('visible');
                    }
                }
                // Phase 4: Retour de la souris normale
                else if (animationPhase <= movementFrames + 21) {
                    const returnPhase = animationPhase - (movementFrames + 15);
                    
                    // Retour de la souris normale
                    if (returnPhase >= 1) {
                        mouseZeroClick.style.visibility = 'visible';
                        mouseLeftClick.style.visibility = 'hidden';
                    }
                    
                    // Bouton P redevient normal
                    if (returnPhase >= 2) {
                        settingsButton.style.background = 'transparent';
                        settingsButton.style.color = 'white';
                    }
                }
                // Phase 5: Attente 1.5 secondes (30 frames) puis fondu
                else if (animationPhase <= movementFrames + 51) {
                    // La fenêtre reste visible pendant 1.5 secondes (30 frames)
                    settingsWindow.classList.add('visible');
                    settingsWindow.classList.remove('fading');
                }
                // Phase 6: Fondu progressif (10 frames = 0.5 seconde)
                else if (animationPhase <= movementFrames + 61) {
                    // Début du fondu
                    if (animationPhase === movementFrames + 52) {
                        settingsWindow.classList.add('fading');
                    }
                }
                // Phase 7: Fenêtre complètement cachée et pause (20 frames = 1 seconde)
                else if (animationPhase <= movementFrames + 81) {
                    // Attendre que le fondu se termine et pause pour bien voir la fermeture
                    settingsWindow.classList.remove('visible');
                }
                // Reset
                else {
                    animationPhase = 0;
                    mouseCursor.style.left = '600px';
                    mouseCursor.style.top = '250px';
                    settingsWindow.classList.remove('visible');
                    settingsWindow.classList.remove('fading');
                    settingsButton.classList.remove('cyan-effect');
                    mouseZeroClick.style.visibility = 'visible';
                    mouseLeftClick.style.visibility = 'hidden';
                }
                // Mettre à jour la progression
                updateProgress(animationPhase, totalAnimationFrames);
                
                // Calculer l'intervalle juste avant de programmer la prochaine frame
                const currentInterval = Math.round(baseInterval / animationSpeed);
                animationTimer = setTimeout(runAnimationFrame, currentInterval);
            }
            
            // Initialiser la progression
            updateProgress(0, totalAnimationFrames);
            
            // Démarrer la première frame
            runAnimationFrame();
        }

        // Fonction pour redémarrer l'animation avec la nouvelle vitesse
        function restartAnimationWithNewSpeed() {
            if (animationTimer) {
                clearTimeout(animationTimer);
            }
            startAnimation();
        }

        // Démarrer l'animation au chargement de la page
        document.addEventListener('DOMContentLoaded', function() {
            // Calculer la durée de déplacement selon la standardisation
            const startX = 600, startY = 250;
            const endX = 350, endY = 400; // Position du bouton P (centre du bouton P dans le widget repositionné)
            const distance = Math.sqrt((endX - startX) ** 2 + (endY - startY) ** 2);
            // movementFrames est déjà calculé en haut du script
            
            console.log(`Distance: ${Math.round(distance)}px, Frames: ${movementFrames}, Vitesse: ${CURSOR_SPEED_PX_PER_FRAME}px/frame`);
            
            // Initialiser le contrôle de vitesse
            const speedSlider = document.getElementById('speedSlider');
            const speedValue = document.getElementById('speedValue');
            const pauseButton = document.getElementById('pauseButton');

            if (speedSlider && speedValue) {
                // Écouteur d'événement pour le slider
                speedSlider.addEventListener('input', function() {
                    const newSpeed = parseFloat(this.value);
                    speedValue.textContent = newSpeed + 'x';
                    
                    console.log('Nouvelle vitesse (Widget-Settings):', newSpeed);
                    
                    // Changement de vitesse réactif sans restart
                    changeAnimationSpeed(newSpeed);
                });

                // Initialiser l'affichage de la vitesse
                speedValue.textContent = animationSpeed + 'x';
            } else {
                console.warn('Éléments du slider non trouvés dans demo-Widget-Settings');
            }

            // Initialiser le bouton pause
            if (pauseButton) {
                pauseButton.addEventListener('click', togglePause);
            } else {
                console.warn('Bouton pause non trouvé dans demo-Widget-Settings');
            }
            
            setTimeout(startAnimation, 1000);
        });

        // Fonction pour changer la vitesse sans restart (réactivité maximale)
        function changeAnimationSpeed(newSpeed) {
            animationSpeed = newSpeed;
            // Pas besoin de restart, la prochaine frame utilisera automatiquement la nouvelle vitesse
        }
        
        // Fonction pour mettre à jour la progression
        function updateProgress(phase, totalFrames) {
            // La progression doit atteindre 100% seulement au redémarrage de la boucle
            const percentage = phase >= totalFrames ? 100 : (phase / totalFrames) * 100;
            progressBar.style.width = percentage + '%';
            
            // Calculer les seuils basés sur les phases réelles de l'animation
            const phase1End = movementFrames; // Fin du déplacement vers le bouton P
            const phase2End = movementFrames + 8; // Fin du clic sur le bouton P
            const phase3End = movementFrames + 15; // Fin de l'apparition de la fenêtre
            const phase4End = movementFrames + 21; // Fin de l'affichage de la fenêtre
            const phase5End = movementFrames + 51; // Fin de l'affichage prolongé
            const phase6End = movementFrames + 61; // Fin de la préparation de fermeture
            const phase7End = movementFrames + 81; // Fin de la fermeture de la fenêtre
            
            // Mettre à jour le texte de progression
            if (phase <= phase1End) {
                progressText.textContent = 'Déplacement vers le bouton P...';
            } else if (phase <= phase2End) {
                progressText.textContent = 'Clic sur le bouton P...';
            } else if (phase <= phase3End) {
                progressText.textContent = 'Ouverture de la fenêtre des paramètres...';
            } else if (phase <= phase4End) {
                progressText.textContent = 'Fenêtre des paramètres affichée...';
            } else if (phase <= phase5End) {
                progressText.textContent = 'Affichage des paramètres...';
            } else if (phase <= phase6End) {
                progressText.textContent = 'Préparation de la fermeture...';
            } else if (phase <= phase7End) {
                progressText.textContent = 'Fermeture de la fenêtre...';
            } else {
                progressText.textContent = 'Préparation du redémarrage...';
            }
        }

        // Fonction pour gérer la pause/reprise
        function togglePause() {
            isPaused = !isPaused;
            const pauseButton = document.getElementById('pauseButton');
            
            if (isPaused) {
                pauseButton.textContent = 'Reprendre';
                pauseButton.classList.add('paused');
            } else {
                pauseButton.textContent = 'Pause';
                pauseButton.classList.remove('paused');
            }
        }
    </script>
</body>
</html>

